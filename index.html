<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<meta name="theme-color" content="#ffffff"/>
<title>Milir | Tonsure & Ear Piercing</title>
<meta name="description" content="Invite for Milir's tonsure and ear piercing at JC Residency, Madurai on 5 Oct 2025, 10:00 am."/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Playfair+Display:wght@600;800&display=swap" rel="stylesheet">
<style>
:root{
  --ink:#222; --muted:#6b6b6b; --bg:#faf7f2; --card:#fff;
  --marigold:#f2a900; --leaf:#2f9e44; --pink:#ff7eb9; --gold:#f4c542; --gold2:#bb9a23;
  /* Ear-lobe anchor as % of the scene box. Use #edit to drag and update these. */
  --anchor-x: 67%;  /* horizontal position of lobe target */
  --anchor-y: 64%;  /* vertical position of lobe target */
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
.wrap{min-height:100svh;display:grid;place-items:center;padding:16px}
.card{position:relative;background:var(--card);border:1px solid #00000010;border-radius:22px;max-width:620px;width:100%;padding:18px 18px 24px;box-shadow:0 18px 60px rgba(0,0,0,.08);overflow:hidden}

/* Toran garland */
.toran{position:absolute;left:-6%;right:-6%;top:-2px;height:120px;pointer-events:none;z-index:2}
.string{position:absolute;left:0;right:0;top:22px;height:2px;background:#00000018;border-radius:2px}
.flowers{position:absolute;left:0;right:0;top:0;display:flex;justify-content:space-between;padding:0 22px}
.flower{width:56px;height:80px;display:grid;place-items:flex-start;transform-origin:top center;animation:sway 3s ease-in-out infinite}
.bloom{width:44px;height:44px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#ffd76a,var(--marigold))}
.leaf{width:10px;height:18px;background:var(--leaf);border-radius:10px;margin:2px 0 0 18px;transform:rotate(-14deg)}
.leaf.r{margin-left:0;margin-right:18px;transform:rotate(14deg);justify-self:end}
@keyframes sway{0%,100%{transform:rotate(-4deg)}50%{transform:rotate(4deg)}}

/* Balloons (faster) */
.balloons{position:absolute;inset:0;overflow:hidden;z-index:1;pointer-events:none}
.balloon{position:absolute;bottom:-140px;width:26px;height:34px;border-radius:50% 50% 45% 45%;background:#ffd1e1;animation:rise 4s linear infinite;opacity:.95;will-change:transform}
.balloon:after{content:"";position:absolute;left:50%;top:32px;width:2px;height:60px;background:#e5cbd4;transform:translateX(-1px)}
.balloon.b2{left:15%;background:#cde6ff;animation-duration:3.8s}
.balloon.b3{left:35%;background:#ffe7a1;animation-duration:3.6s}
.balloon.b4{left:65%;background:#d7ffc9;animation-duration:3.9s}
.balloon.b5{left:85%;background:#ffe0ff;animation-duration:3.4s}
@keyframes rise{0%{transform:translate3d(0,0,0)}50%{transform:translate3d(14px,-46vh,0)}100%{transform:translate3d(-10px,-96vh,0)}}

/* Headings */
.kicker{margin-top:78px;text-align:center;letter-spacing:.14em;text-transform:uppercase;font-size:12px;color:var(--muted);position:relative;z-index:3}
.title{font-family:"Playfair Display",serif;font-weight:800;font-size:clamp(36px,7vw,60px);line-height:1.04;text-align:center;margin:6px 0;position:relative;z-index:3}
.sub{font-size:15px;text-align:center;color:#333;position:relative;z-index:3}

/* Countdown */
.countdown{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:12px 0 4px;position:relative;z-index:3}
.tile{min-width:68px;background:#fff;border:1px solid #00000012;border-radius:14px;padding:10px 10px;text-align:center;box-shadow:0 6px 16px rgba(0,0,0,.05)}
.num{font-size:26px;font-weight:800;font-family:"Playfair Display",serif}
.lbl{font-size:11px;color:var(--muted)}

/* Details */
.details{margin:14px auto 10px;display:grid;gap:6px;justify-items:center;position:relative;z-index:3}
.badge{background:#f6f3ed;border:1px solid #00000010;border-radius:999px;padding:8px 14px;font-size:14px}
.small{font-size:13px;color:var(--muted);text-align:center}

/* Scene */
.scroll-scene{margin:16px 0 8px}
.scene-wrap{position:relative;height:60vh;min-height:420px;border:1px dashed #00000014;border-radius:16px;background:#fffafc;display:grid;place-items:center;overflow:hidden}
.scene{position:relative;width:100%;height:100%}
.scene img{position:absolute;display:block;max-width:none;will-change:transform;image-rendering:auto}

/* Baby image scales in center */
#baby{left:50%;top:50%;transform:translate(-50%,-50%) scale(.82);width:auto;height:85%;}

/* Jhumka starts off-screen and flies to anchor */
#jhumka{left:0;top:0;transform:translate(-9999px,-9999px) scale(.8) rotate(8deg);width:auto;height:24%;}
.scene.attached #jhumka{animation:pop .55s ease-out}
@keyframes pop{0%{transform:translate(var(--jx), var(--jy)) scale(.8) rotate(0)}60%{transform:translate(var(--jx), var(--jy)) scale(1.15) rotate(0)}100%{transform:translate(var(--jx), var(--jy)) scale(1) rotate(0)}}

/* Anchor overlay for #edit mode */
.anchor-dot{position:absolute;width:16px;height:16px;border-radius:50%;background:#ff3b7c;border:2px solid #fff;box-shadow:0 2px 8px rgba(0,0,0,.25);transform:translate(-50%,-50%);display:none;z-index:5}
.edit .anchor-dot{display:block}
.anchor-readout{position:absolute;bottom:8px;left:8px;background:#111;color:#fff;border-radius:10px;padding:6px 10px;font-size:12px;display:none}
.edit .anchor-readout{display:block}

/* Actions + QR aligned */
.info-grid{display:grid;gap:12px;margin-top:14px}
@media(min-width:600px){.info-grid{grid-template-columns:1fr 200px;align-items:center}}
.actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
.btn{appearance:none;border:0;background:#111;color:#fff;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;text-decoration:none}
.btn.ghost{background:#fff;color:#111;border:1px solid #00000020}
.qr{display:grid;place-items:center}
.qr img{width:180px;height:180px;max-width:42vw;border-radius:12px;border:1px solid #00000010}
.footer{text-align:center;color:var(--muted);font-size:12px;margin-top:12px}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .flower,.balloon{animation:none!important}
}
</style>
</head>
<body>
<div class="wrap">
<main class="card">

<!-- Toran + balloons -->
<div class="toran" aria-hidden="true">
  <div class="string"></div>
  <div class="flowers">
    <div class="flower"><div class="bloom"></div><div class="leaf"></div></div>
    <div class="flower"><div class="bloom"></div><div class="leaf r"></div></div>
    <div class="flower"><div class="bloom"></div><div class="leaf"></div></div>
    <div class="flower"><div class="bloom"></div><div class="leaf r"></div></div>
    <div class="flower"><div class="bloom"></div><div class="leaf"></div></div>
    <div class="flower"><div class="bloom"></div><div class="leaf r"></div></div>
  </div>
</div>
<div class="balloons" aria-hidden="true">
  <div class="balloon b1" style="left:5%"></div>
  <div class="balloon b2"></div>
  <div class="balloon b3"></div>
  <div class="balloon b4"></div>
  <div class="balloon b5"></div>
</div>

<p class="kicker">You are invited</p>
<h1 class="title">Milir</h1>
<p class="sub">Tonsure & Ear Piercing ¬∑ JC Residency, Madurai</p>

<div class="countdown" id="countdown" aria-live="polite"></div>
<p class="small">Sun, 5 Oct 2025 ¬∑ 10:00 am IST</p>

<section class="details">
  <span class="badge">üìç JC Residency, Madurai</span>
  <span class="badge">üïô 10:00 am</span>
</section>

<!-- Ear Piercing: your images + precise docking -->
<section class="scroll-scene" aria-label="Ear piercing">
  <div class="scene-wrap" id="earScene">
    <div class="scene" id="scene">
      <!-- drop your assets in /assets -->
      <img id="baby" src="assets/baby_side.png" alt="Baby girl"/>
      <img id="jhumka" src="assets/jhumka.png" alt="Jhumka"/>
      <div class="anchor-dot" id="anchor"></div>
      <div class="anchor-readout" id="readout">x: <span id="rx"></span> y: <span id="ry"></span></div>
    </div>
  </div>
</section>

<!-- actions + QR -->
<div class="info-grid">
  <div class="actions">
    <a class="btn" href="https://www.google.com/maps/search/?api=1&query=JC+Residency+Madurai" target="_blank" rel="noopener">Open map</a>
    <button class="btn ghost" id="addCal">Add to calendar</button>
    <button class="btn" id="shareBtn">Share</button>
  </div>
  <div class="qr">
    <img alt="QR for location" src="https://api.qrserver.com/v1/create-qr-code/?size=240x240&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fsearch%2F%3Fapi%3D1%26query%3DJC%2BResidency%2BMadurai"/>
    <p class="small">Scan for directions</p>
  </div>
</div>

<p class="footer">With love ‚Äî family and friends</p>
</main>
</div>

<script>
const EVENT_ISO = "2025-10-05T10:00:00+05:30";

/* countdown */
(function(){
  const el=document.getElementById('countdown');
  const parts=['Days','Hours','Mins','Secs'];
  const tiles=parts.map(l=>{
    const t=document.createElement('div');
    t.className='tile';
    t.innerHTML=`<div class="num">0</div><div class="lbl">${l}</div>`;
    el.appendChild(t);
    return t;
  });
  function tick(){
    const now=new Date(), target=new Date(EVENT_ISO);
    const s=Math.max(0, Math.floor((target-now)/1000));
    const d=Math.floor(s/86400);
    const h=Math.floor((s%86400)/3600);
    const m=Math.floor((s%3600)/60);
    const sec=s%60;
    [d,h,m,sec].forEach((v,i)=>tiles[i].querySelector('.num').textContent=v);
  }
  setInterval(tick,1000); tick();
})();

/* add to calendar */
(function(){
  const btn=document.getElementById('addCal');
  if(!btn) return;
  btn.addEventListener('click',()=>{
    const title='Milir | Tonsure & Ear Piercing';
    const dtStart=new Date(EVENT_ISO);
    const dtEnd=new Date(dtStart.getTime()+2*60*60*1000);
    const fmt=d=>d.toISOString().replace(/[-:]/g,'').split('.')[0]+'Z';
    const ics=`BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
DTSTART:${fmt(dtStart)}
DTEND:${fmt(dtEnd)}
SUMMARY:${title}
LOCATION:JC Residency, Madurai
DESCRIPTION:Join us to bless Milir.
END:VEVENT
END:VCALENDAR`;
    const blob=new Blob([ics],{type:'text/calendar'});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download='milir-ceremony.ics'; a.click();
    URL.revokeObjectURL(url);
  });
})();

/* share */
(function(){
  const btn=document.getElementById('shareBtn');
  if(!btn) return;
  btn.addEventListener('click',async()=>{
    try{
      if(navigator.share){
        await navigator.share({title:document.title,text:'Join us on 5 Oct 2025 at JC Residency, Madurai',url:location.href});
      }else{
        alert('Copy the link: '+location.href);
      }
    }catch{}
  });
})();

/* Smooth scroll-driven: zoom baby + fly jhumka to anchor */
(function(){
  const sceneWrap = document.getElementById('earScene');
  const scene     = document.getElementById('scene');
  const baby      = document.getElementById('baby');
  const jhumka    = document.getElementById('jhumka');
  const anchorDot = document.getElementById('anchor');
  const readout   = document.getElementById('readout');
  const rxSpan    = document.getElementById('rx');
  const rySpan    = document.getElementById('ry');

  if(!sceneWrap||!scene||!baby||!jhumka) return;

  const isEdit = location.hash === '#edit';
  if(isEdit) document.body.classList.add('edit');

  function clamp(v,min,max){return Math.max(min,Math.min(max,v))}
  function lerp(a,b,t){return a+(b-a)*t}
  function ease(t){return t<.5 ? 4*t*t*t : 1-Math.pow(-2*t+2,3)/2}

  function anchorPx(){
    const r=scene.getBoundingClientRect();
    const ax=r.width * parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--anchor-x'))/100;
    const ay=r.height* parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--anchor-y'))/100;
    return {x:ax,y:ay};
  }

  // Drag anchor in #edit mode
  if(isEdit){
    const r=scene.getBoundingClientRect();
    const dot=anchorDot;
    dot.style.left=`var(--anchor-x)`;
    dot.style.top=`var(--anchor-y)`;
    dot.style.left=`calc(var(--anchor-x))`;
    dot.style.top=`calc(var(--anchor-y))`;
    function placeDot(){
      const {x,y}=anchorPx();
      dot.style.left = (x/r.width*100)+'%';
      dot.style.top  = (y/r.height*100)+'%';
      rxSpan.textContent = getComputedStyle(document.documentElement).getPropertyValue('--anchor-x').trim();
      rySpan.textContent = getComputedStyle(document.documentElement).getPropertyValue('--anchor-y').trim();
    }
    placeDot();

    let dragging=false;
    dot.addEventListener('pointerdown',e=>{dragging=true;dot.setPointerCapture(e.pointerId)});
    window.addEventListener('pointermove',e=>{
      if(!dragging) return;
      const s=scene.getBoundingClientRect();
      const nx=clamp((e.clientX-s.left)/s.width*100,0,100);
      const ny=clamp((e.clientY-s.top)/s.height*100,0,100);
      document.documentElement.style.setProperty('--anchor-x', nx+'%');
      document.documentElement.style.setProperty('--anchor-y', ny+'%');
      placeDot();
    });
    window.addEventListener('pointerup',()=>{dragging=false});
  }

  // rAF scroll mapping
  let ticking=false;
  function onScroll(){
    if(ticking) return;
    ticking=true;
    requestAnimationFrame(()=>{
      const r=sceneWrap.getBoundingClientRect();
      const vh=window.innerHeight||document.documentElement.clientHeight;
      // progress 0..1
      let p=(vh*0.8 - r.top)/(r.height+vh*0.4);
      p=clamp(p,0,1);
      const e=ease(p);

      // baby zoom
      const scale=lerp(.82,1.1,e);
      const ty=lerp(0,-8,e);
      baby.style.transform=`translate(-50%,-50%) scale(${scale}) translateY(${ty}px)`;

      // jhumka flight
      const s=scene.getBoundingClientRect();
      const {x:ax,y:ay}=anchorPx();
      // jhumka's stud center: assume center-top of image ~ 50% x, 8% y
      const studX = jhumka.naturalWidth  ? jhumka.naturalWidth*0.5  : 70;
      const studY = jhumka.naturalHeight ? jhumka.naturalHeight*0.08 : 20;
      const imgW  = jhumka.getBoundingClientRect().width;
      const imgH  = jhumka.getBoundingClientRect().height;
      const offX  = studX / (jhumka.naturalWidth||140) * imgW;
      const offY  = studY / (jhumka.naturalHeight||240)* imgH;

      const startX = s.width*0.9;
      const startY = -s.height*0.28;

      const tx = ax - offX;
      const ty2= ay - offY;

      const curX=lerp(startX,tx,e);
      const curY=lerp(startY,ty2,e);
      const rot = lerp(12,0,e);
      const sc  = lerp(.8,1,e);

      jhumka.style.transform = `translate(${curX}px, ${curY}px) rotate(${rot}deg) scale(${sc})`;
      jhumka.style.opacity   = 0.2 + 0.8*e;

      if(e>0.985){ scene.classList.add('attached') } else { scene.classList.remove('attached') }

      ticking=false;
    });
  }
  onScroll();
  document.addEventListener('scroll',onScroll,{passive:true});
  window.addEventListener('resize',onScroll);
})();
</script>
</body>
</html>
