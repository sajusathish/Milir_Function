<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<meta name="theme-color" content="#ffffff"/>
<title>Milir | Tonsure & Ear Piercing — Story Invite</title>
<meta name="description" content="Scroll or tap through Milir's Tonsure and Ear Piercing story. JC Residency, Madurai. 5 Oct 2025, 10:00 am."/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
<style>
:root{
  --ink:#222; --muted:#6b6b6b; --bg:#faf7f2; --card:#fff;
  --gold:#f4c542; --gold2:#bb9a23; --pink:#ff7eb9; --rose:#ff9bcf;
  --marigold:#f2a900; --leaf:#2f9e44;
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
h1,h2{font-family:"Playfair Display",serif}

/* Pager */
#story{height:100svh;overflow:auto;scroll-snap-type:y mandatory;scroll-behavior:smooth;overscroll-behavior:contain}
.panel{position:relative;height:100svh;scroll-snap-align:start;display:grid;place-items:center;padding:12px}
.center{max-width:900px;width:100%}
.card{position:relative;background:var(--card);border:1px solid #00000012;border-radius:22px;box-shadow:0 18px 60px rgba(0,0,0,.08);overflow:hidden}
.pad{padding:18px}

/* Toran */
.toran{position:absolute;left:-6%;right:-6%;top:-2px;height:120px;pointer-events:none;z-index:3}
.string{position:absolute;left:0;right:0;top:22px;height:2px;background:#00000018;border-radius:2px}
.flowers{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:flex-start;padding:0 22px}
.flower{width:56px;height:80px;display:grid;place-items:flex-start;transform-origin:top center;animation:sway 3s ease-in-out infinite}
.bloom{width:44px;height:44px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#ffd76a,var(--marigold))}
.leaf{width:10px;height:18px;background:var(--leaf);border-radius:10px;margin:2px 0 0 18px;transform:rotate(-14deg)}
.leaf.r{margin-left:0;margin-right:18px;transform:rotate(14deg);justify-self:end}
@keyframes sway{0%,100%{transform:rotate(-4deg)}50%{transform:rotate(4deg)}}

/* Balloons (faster, GPU) */
.balloons{position:absolute;inset:0;overflow:hidden;z-index:1;pointer-events:none}
.balloon{position:absolute;bottom:-140px;width:26px;height:34px;border-radius:50% 50% 45% 45%;background:#ffd1e1;animation:rise 4.2s linear infinite;opacity:.95;will-change:transform}
.balloon:after{content:"";position:absolute;left:50%;top:32px;width:2px;height:60px;background:#e5cbd4;transform:translateX(-1px)}
.balloon.b2{left:15%;background:#cde6ff;animation-duration:4s}
.balloon.b3{left:35%;background:#ffe7a1;animation-duration:3.8s}
.balloon.b4{left:65%;background:#d7ffc9;animation-duration:4.1s}
.balloon.b5{left:85%;background:#ffe0ff;animation-duration:3.6s}
@keyframes rise{
  0%{transform:translate3d(0,0,0)}
  50%{transform:translate3d(14px,-46vh,0)}
  100%{transform:translate3d(-10px,-96vh,0)}
}

/* Titles */
.kicker{text-align:center;letter-spacing:.14em;text-transform:uppercase;font-size:12px;color:var(--muted);z-index:2;position:relative}
.title{font-weight:800;font-size:clamp(36px,7vw,64px);line-height:1.04;text-align:center;margin:6px 0;position:relative;z-index:2}
.sub{font-size:15px;text-align:center;color:#333;position:relative;z-index:2}
.note{font-size:13px;color:var(--muted);text-align:center}

/* Scene frame */
.scene{position:relative;aspect-ratio:9/16;background:#fff;border-radius:16px;border:1px dashed #00000014;overflow:hidden}
.scene-inner{position:relative;width:100%;height:100%}
.scene .layer{will-change:transform,opacity}

/* Scene 1 (tonsure) */
#scene1 svg{width:min(560px,85%);height:auto;position:absolute;left:50%;top:50%;transform:translate(-50%,-52%)}
#tuft{transform-origin:270px 190px}
#scissors{position:absolute;right:6%;top:12%;width:92px;height:auto;opacity:0;transform:rotate(12deg)}
.cut #scissors{animation:snip 1s ease-out forwards}
@keyframes snip{
  0%{opacity:0;transform:translate(30px,-30px) rotate(20deg)}
  30%{opacity:1}
  70%{transform:translate(-12px,8px) rotate(-10deg)}
  100%{transform:translate(0,0) rotate(0)}
}
.fall{opacity:0}
.cut #tuft{animation:fallHair .9s .45s cubic-bezier(.2,.8,.2,1) forwards}
@keyframes fallHair{to{transform:translateY(170px) rotate(-28deg);opacity:1}}

/* Scene 2 (ear piercing) */
#scene2 svg{width:min(620px,92%);height:auto;position:absolute;left:50%;top:50%;transform:translate(-46%,-50%)}
#jhumka{transform-origin:60px 20px;opacity:.1}
.attach #jhumka{animation:flyIn 1.1s cubic-bezier(.2,.8,.2,1) forwards}
@keyframes flyIn{
  0%{transform:translate(220px,-180px) scale(.7) rotate(8deg);opacity:.1}
  70%{transform:translate(var(--jx), calc(var(--jy) - 18px)) scale(.96) rotate(0);opacity:.95}
  100%{transform:translate(var(--jx), var(--jy)) scale(1) rotate(0);opacity:1}
}

/* Finale layout */
.info-grid{display:grid;gap:12px;margin-top:14px}
@media(min-width:680px){.info-grid{grid-template-columns:1.4fr .6fr;align-items:center}}
.actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
.btn{appearance:none;border:0;background:#111;color:#fff;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;text-decoration:none}
.btn.ghost{background:#fff;color:#111;border:1px solid #00000020}
.qr{display:grid;place-items:center}
.qr img{width:min(180px,42vw);height:min(180px,42vw);border-radius:12px;border:1px solid #00000010}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  #story{scroll-behavior:auto}
  .flower,.balloon,.cut #tuft,.attach #jhumka{animation:none!important}
  #scissors{opacity:1}
}
</style>
</head>
<body>
<div id="story">

<!-- Panel 0: Splash -->
<section class="panel">
  <div class="center">
    <div class="card pad" style="text-align:center; position:relative">
      <div class="toran" aria-hidden="true">
        <div class="string"></div>
        <div class="flowers">
          <div class="flower"><div class="bloom"></div><div class="leaf"></div></div>
          <div class="flower"><div class="bloom"></div><div class="leaf r"></div></div>
          <div class="flower"><div class="bloom"></div><div class="leaf"></div></div>
          <div class="flower"><div class="bloom"></div><div class="leaf r"></div></div>
          <div class="flower"><div class="bloom"></div><div class="leaf"></div></div>
          <div class="flower"><div class="bloom"></div><div class="leaf r"></div></div>
        </div>
      </div>
      <div class="balloons" aria-hidden="true">
        <div class="balloon b1" style="left:5%"></div>
        <div class="balloon b2"></div>
        <div class="balloon b3"></div>
        <div class="balloon b4"></div>
        <div class="balloon b5"></div>
      </div>
      <p class="kicker">You are invited</p>
      <h1 class="title">Milir</h1>
      <p class="sub">Tonsure & Ear Piercing · JC Residency, Madurai</p>
    </div>
  </div>
</section>

<!-- Panel 1: Tonsure -->
<section class="panel">
  <div class="center">
    <div class="card pad" id="card1">
      <div class="scene" id="scene1">
        <div class="scene-inner">
          <!-- Baby front cartoon (clean, simple) -->
          <svg viewBox="0 0 560 520" role="img" aria-label="Baby girl">
            <!-- head -->
            <ellipse cx="300" cy="260" rx="180" ry="164" fill="#ffd8c8"/>
            <!-- hair cap -->
            <path d="M120 250c20-128 198-200 356-92 44 30 74 78 84 108-40-44-140-36-232-24-120 16-178 36-208 8z" fill="#3b2a17"/>
            <!-- tuft -->
            <g id="tuft">
              <path d="M228 180 q34 -42 92 -20 q-18 26 -12 58 q-28 -10 -80 -38z" fill="#3b2a17"/>
            </g>
            <!-- eyes -->
            <circle cx="250" cy="300" r="10" fill="#222"/>
            <circle cx="350" cy="300" r="10" fill="#222"/>
            <path d="M230 288 q22 -18 44 0" stroke="#222" stroke-width="4" fill="none"/>
            <path d="M330 288 q22 -18 44 0" stroke="#222" stroke-width="4" fill="none"/>
            <!-- blush -->
            <circle cx="220" cy="336" r="16" fill="#ffced9" opacity=".7"/>
            <circle cx="384" cy="336" r="16" fill="#ffced9" opacity=".7"/>
            <!-- smile -->
            <path d="M260 354 q42 34 84 0" stroke="#cc6b7a" stroke-width="6" fill="none" stroke-linecap="round"/>
            <!-- bow -->
            <g transform="translate(186,196) rotate(-16)">
              <ellipse cx="-18" cy="0" rx="18" ry="12" fill="#ff9bcf"/>
              <ellipse cx="18" cy="0" rx="18" ry="12" fill="#ff9bcf"/>
              <circle cx="0" cy="0" r="7" fill="#ff7eb9"/>
            </g>
            <!-- bindi -->
            <circle cx="300" cy="240" r="3.5" fill="#d9480f"/>
          </svg>
          <!-- scissors svg image for crisp edges -->
          <img id="scissors" alt="" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'><g fill='none' stroke='%23222' stroke-width='8' stroke-linecap='round'><circle cx='30' cy='30' r='18'/><circle cx='90' cy='30' r='18'/><path d='M30 30 L60 60 L90 30 M30 90 L60 60 L90 90'/></g></svg>"/>
        </div>
      </div>
      <p class="note" style="margin-top:8px">Mottai Ceremony · Sun, 5 Oct 2025 · 10:00 am</p>
    </div>
  </div>
</section>

<!-- Panel 2: Ear Piercing -->
<section class="panel">
  <div class="center">
    <div class="card pad" id="card2">
      <div class="scene" id="scene2">
        <div class="scene-inner">
          <!-- Single SVG for perfect docking -->
          <svg id="earSvg" viewBox="0 0 620 520" role="img" aria-label="Baby girl side">
            <!-- hair -->
            <path d="M110 240c0-126 182-200 360-90 64 36 102 102 90 138-8 22-30 36-52 34-18-2-34-12-52-24-36-24-92-44-160-46-92-4-164 30-192 50-12 8-26 8-38 0-12-8-20-22-20-40 0-18 8-30 64-22z" fill="#3b2a17"/>
            <!-- face -->
            <path d="M226 188c0-60 48-96 106-96s110 36 110 96c0 74-64 126-142 126s-74-68-74-126z" fill="#ffd8c8"/>
            <!-- eye + smile -->
            <circle cx="404" cy="240" r="8" fill="#222"/>
            <path d="M386 230 q18 -12 36 0" stroke="#222" stroke-width="4" fill="none"/>
            <path d="M384 270 q14 18 34 0" stroke="#cc6b7a" stroke-width="5" fill="none" stroke-linecap="round"/>
            <!-- ear with lobe anchor -->
            <g id="earGroup2">
              <path d="M446 246c12 12 16 36 0 52-8 10-22 14-28 6-6-8 4-18 8-26 4-10-2-22 6-30 4-4 10-4 14-2z" fill="#ffd3c6" stroke="#e7a892" stroke-width="3"/>
              <circle id="lobe2" cx="440" cy="286" r="3.5" fill="#bb9a23"/>
            </g>
            <!-- bow -->
            <g transform="translate(332,152) rotate(-14)">
              <ellipse cx="-18" cy="0" rx="18" ry="12" fill="#ff9bcf"/>
              <ellipse cx="18" cy="0" rx="18" ry="12" fill="#ff9bcf"/>
              <circle cx="0" cy="0" r="7" fill="#ff7eb9"/>
            </g>
            <circle cx="396" cy="210" r="3.5" fill="#d9480f"/>
            <!-- jhumka earring group lives inside same SVG coords -->
            <g id="jhumka" transform="translate(220,-180)">
              <circle cx="60" cy="20" r="12" fill="var(--gold)" stroke="var(--gold2)" stroke-width="4"/>
              <rect x="58" y="32" width="4" height="64" rx="2" fill="var(--gold2)"/>
              <path d="M20 120 q40 -36 80 0 v48 H20z" fill="#ffdfa3" stroke="var(--gold2)" stroke-width="4"/>
              <g>
                <circle cx="28" cy="172" r="6" fill="#ffb6d1" stroke="#e88cb2" stroke-width="3"/>
                <circle cx="46" cy="182" r="6" fill="#ffe38f" stroke="#e0b54f" stroke-width="3"/>
                <circle cx="74" cy="182" r="6" fill="#ffe38f" stroke="#e0b54f" stroke-width="3"/>
                <circle cx="92" cy="172" r="6" fill="#ffb6d1" stroke="#e88cb2" stroke-width="3"/>
              </g>
            </g>
          </svg>
        </div>
      </div>
      <p class="note" style="margin-top:8px">Ear Piercing Ceremony · Bless Milir with your love</p>
    </div>
  </div>
</section>

<!-- Panel 3: Finale -->
<section class="panel">
  <div class="center">
    <div class="card pad">
      <p class="kicker">See you there</p>
      <h2 class="title" style="font-size:clamp(28px,6vw,48px)">JC Residency, Madurai</h2>
      <p class="sub">Sun, 5 Oct 2025 · 10:00 am IST</p>
      <div class="countdown" id="countdown" aria-live="polite"></div>
      <div class="info-grid">
        <div class="actions">
          <a class="btn" href="https://www.google.com/maps/search/?api=1&query=JC+Residency+Madurai" target="_blank" rel="noopener">Open map</a>
          <button class="btn ghost" id="addCal">Add to calendar</button>
          <button class="btn" id="shareBtn">Share</button>
        </div>
        <div class="qr">
          <img alt="QR for location" src="https://api.qrserver.com/v1/create-qr-code/?size=240x240&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fsearch%2F%3Fapi%3D1%26query%3DJC%2BResidency%2BMadurai"/>
          <p class="note">Scan for directions</p>
        </div>
      </div>
      <p class="note" style="margin-top:8px">With love — family and friends</p>
    </div>
  </div>
</section>

</div>

<script>
const EVENT_ISO = "2025-10-05T10:00:00+05:30";

/* Tap to advance */
(function(){
  const panels=[...document.querySelectorAll('.panel')];
  const story=document.getElementById('story');
  panels.forEach((p,i)=>p.addEventListener('click',()=>{
    if(window.getSelection && String(window.getSelection())) return; // don't advance if selecting text
    if(i<panels.length-1) panels[i+1].scrollIntoView({behavior:'smooth'});
  }));
})();

/* Tonsure: snip on view */
(function(){
  const scene = document.getElementById('scene1');
  const card  = document.getElementById('card1');
  const io = new IntersectionObserver(([e])=>{
    if(e.isIntersecting){ card.classList.add('cut'); }
  }, {threshold:.6});
  io.observe(scene);
})();

/* Ear piercing: animate jhumka inside SVG to exact lobe */
(function(){
  const svg  = document.getElementById('earSvg');
  const lobe = document.getElementById('lobe2');
  const jhum = document.getElementById('jhumka');
  const card = document.getElementById('card2');

  if(!svg || !lobe || !jhum) return;

  function attachNow(){
    // compute local target translation relative to jhumka origin (60,20 is top stud center)
    const targetX = lobe.cx.baseVal.value - 60;
    const targetY = lobe.cy.baseVal.value - 20;
    // set CSS vars for keyframes
    const host = svg; // use SVG as host for CSS vars
    host.style.setProperty('--jx', targetX + 'px');
    host.style.setProperty('--jy', targetY + 'px');
    // trigger animation via class
    card.classList.add('attach');
  }

  // run when scene enters view
  const io = new IntersectionObserver(([e])=>{
    if(e.isIntersecting){ attachNow(); io.disconnect(); }
  }, {threshold:.6});
  io.observe(svg);

  // also recalc on resize to be safe (viewBox won't change, but just in case you tweak SVG later)
  addEventListener('resize', ()=>{ if(card.classList.contains('attach')) attachNow(); });
})();

/* Countdown */
(function(){
  const el=document.getElementById('countdown');
  const parts=['Days','Hours','Mins','Secs'];
  const tiles=parts.map(l=>{
    const t=document.createElement('div');
    t.className='tile';
    t.innerHTML=`<div class="num">0</div><div class="lbl">${l}</div>`;
    el.appendChild(t);
    return t;
  });
  function tick(){
    const now=new Date(), target=new Date(EVENT_ISO);
    const s=Math.max(0, Math.floor((target-now)/1000));
    const d=Math.floor(s/86400);
    const h=Math.floor((s%86400)/3600);
    const m=Math.floor((s%3600)/60);
    const sec=s%60;
    [d,h,m,sec].forEach((v,i)=>tiles[i].querySelector('.num').textContent=v);
  }
  setInterval(tick,1000); tick();
})();

/* Add to calendar */
(function(){
  const btn=document.getElementById('addCal');
  if(!btn) return;
  btn.addEventListener('click',()=>{
    const title='Milir | Tonsure & Ear Piercing';
    const dtStart=new Date(EVENT_ISO);
    const dtEnd=new Date(dtStart.getTime()+2*60*60*1000);
    const fmt=d=>d.toISOString().replace(/[-:]/g,'').split('.')[0]+'Z';
    const ics=`BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
DTSTART:${fmt(dtStart)}
DTEND:${fmt(dtEnd)}
SUMMARY:${title}
LOCATION:JC Residency, Madurai
DESCRIPTION:Join us to bless Milir.
END:VEVENT
END:VCALENDAR`;
    const blob=new Blob([ics],{type:'text/calendar'});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download='milir-ceremony.ics'; a.click();
    URL.revokeObjectURL(url);
  });
})();

/* Share */
(function(){
  const btn=document.getElementById('shareBtn');
  if(!btn) return;
  btn.addEventListener('click',async()=>{
    try{
      if(navigator.share){
        await navigator.share({title:document.title,text:'Join us on 5 Oct 2025 at JC Residency, Madurai',url:location.href});
      }else{ alert('Copy the link: '+location.href); }
    }catch{}
  });
})();
</script>
</body>
</html>
